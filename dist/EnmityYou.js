function R(t){window.enmity.plugins.registerPlugin(t)}window.enmity.modules.common.Constants,window.enmity.modules.common.Clipboard,window.enmity.modules.common.Assets,window.enmity.modules.common.Messages,window.enmity.modules.common.Clyde,window.enmity.modules.common.Avatars,window.enmity.modules.common.Native;const c=window.enmity.modules.common.React;window.enmity.modules.common.Dispatcher,window.enmity.modules.common.Storage,window.enmity.modules.common.Toasts,window.enmity.modules.common.Dialog,window.enmity.modules.common.Token,window.enmity.modules.common.REST,window.enmity.modules.common.Settings;const h=window.enmity.modules.common.Users;window.enmity.modules.common.Navigation,window.enmity.modules.common.NavigationNative,window.enmity.modules.common.NavigationStack,window.enmity.modules.common.Theme,window.enmity.modules.common.Linking,window.enmity.modules.common.StyleSheet,window.enmity.modules.common.ColorMap,window.enmity.modules.common.Components;const C=window.enmity.modules.common.Locale;window.enmity.modules.common.Profiles,window.enmity.modules.common.Lodash,window.enmity.modules.common.Logger,window.enmity.modules.common.Flux,window.enmity.modules.common.SVG,window.enmity.modules.common.Scenes,window.enmity.modules.common.Moment;function l(...t){return window.enmity.modules.getByProps(...t)}function E(...t){return window.enmity.modules.getByName(...t)}window.enmity.modules.common;function v(t){return window.enmity.patcher.create(t)}var O="EnmityYou",F="1.1.7",_="Allows you to use Enmity inside of the new You Tab. Enable from DevTools Widget \u279D Design Toggles :3",P=[{name:"Rosie<3",id:"581573474296791211"}],G="#ff91ff",S={name:O,version:F,description:_,authors:P,color:G};const{components:e}=window.enmity;e.Alert,e.Button,e.FlatList,e.Image,e.ImageBackground,e.KeyboardAvoidingView,e.Modal,e.Pressable,e.RefreshControl,e.ScrollView,e.SectionList,e.StatusBar,e.StyleSheet,e.Switch,e.Text,e.TextInput,e.TouchableHighlight,e.TouchableOpacity,e.TouchableWithoutFeedback,e.Touchable;const T=e.View;e.VirtualizedList,e.Form,e.FormArrow,e.FormCTA,e.FormCTAButton,e.FormCardSection,e.FormCheckbox,e.FormDivider,e.FormHint,e.FormIcon,e.FormInput,e.FormLabel,e.FormRadio,e.FormRow,e.FormSection,e.FormSelect,e.FormSubLabel,e.FormSwitch,e.FormTernaryCheckBox,e.FormText,e.FormTextColors,e.FormTextSizes;function f(t){return window.enmity.assets.getIDByName(t)}const g={general:"ENMITY",plugins:"ENMITY_PLUGINS",themes:"ENMITY_THEMES",page:"ENMITY_PAGE"},w={general:"Enmity",plugins:"EnmityPlugins",themes:"EnmityThemes",page:"EnmityCustomPage"},L={general:"General",plugins:"Plugins",themes:"Themes",page:"Page"},D={general:{uri:"https://files.enmity.app/icon-64.png"},plugins:f("ic_activity_24px"),themes:f("img_nitro_star"),page:null},A={general:[w.general],plugins:[w.general],themes:[w.general],page:[]},N={general:null,plugins:g.general,themes:g.general,page:null},m=Object.keys(w).map(t=>({[t]:{upper:g[t],route:w[t],title:L[t],icon:D[t],relationship:N[t],breadcrumbs:A[t]}})).reduce((t,a)=>({...t,...a}),{}),x=E("getScreens"),k=l("SETTING_RENDERER_CONFIGS");var B=()=>{const{Enmity:t,EnmityPlugins:a,EnmityThemes:u}=x(h.getCurrentUser()),[r,o]=[a,u].map(n=>({navigation:i,route:s})=>(c.useEffect(()=>{s!=null&&s.hasSetHeaderRight||(s.hasSetHeaderRight=!0,i.setOptions({headerRight:()=>n.headerRight?c.createElement(T,{style:{left:12}},c.createElement(n.headerRight,null)):null}))},[]),c.createElement(n.render,null)));Object.assign(k.SETTING_RENDERER_CONFIGS,Object.entries({general:{route:m.general.route,getComponent:()=>t.render},plugins:{route:m.plugins.route,getComponent:()=>r},themes:{route:m.themes.route,getComponent:()=>o},page:{route:m.page.route,getComponent:()=>({navigation:n,route:{params:i}})=>{var s;const d=(s=i.pagePanel)!=null?s:T;return c.useEffect(()=>{i.pageName&&!i.hasSetTitle&&(i.hasSetTitle=!0,n.setOptions({title:i.pageName}))},[]),c.createElement(d,null)}}}).map(([n,i])=>({[m[n].upper]:{type:"route",icon:m[n].icon,screen:i}})).reduce((n,i)=>({...n,...i}),{}))};const j=l("getSettingTitleConfig");var M=t=>{t.after(j,"getSettingTitleConfig",(a,u,r)=>{const o=Object.keys(m).map(n=>({[m[n].upper]:m[n].title})).reduce((n,i)=>({...n,...i}),{});return{...r,...o}})};const U=l("SETTING_RENDERER_CONFIGS");var H=()=>{Object.assign(U.SETTING_RELATIONSHIPS,Object.keys(N).map(t=>({[m[t].upper]:m[t].relationship})).reduce((t,a)=>({...t,...a}),{}))};function V(t,a,u){return window.enmity.utilities.findInReactTree(t,a,u)}const Y=E("SettingsOverviewScreen",{default:!1});var $=t=>{t.after(Y,"default",(a,u,r)=>{const{sections:o}=V(r,s=>s.sections),n=o.findIndex(s=>s==null?void 0:s.settings.find(d=>d==="ACCOUNT"));!o.find(s=>s.title===m.general.route)&&(o==null||o.splice(n===-1?1:n+1,0,{title:m.general.route,settings:[m.general.upper,m.plugins.upper,m.themes.upper]}));const i=o.findIndex(s=>s.title===C.Messages.SUPPORT);o[i].settings=o[i].settings.filter(s=>s!=="UPLOAD_DEBUG_LOGS")})};const z=l("useSettingSearch"),W=l("getSettingSearchListItems"),K=l("SETTING_RENDERER_CONFIGS");var q=t=>{t.after(z,"useSettingSearch",(a,u,r)=>{r.results=r.results.filter(o=>!Object.values(g).includes(o)),Object.keys(m).filter(o=>o!=="page").forEach(o=>{const{route:n,upper:i}=m[o];n.toLowerCase().includes(r.text.toLowerCase())&&!r.results.find(s=>s===i)&&r.results.unshift(i)})}),t.after(W,"getSettingSearchListItems",(a,[u],r)=>(r=r.filter(o=>!Object.values(g).includes(o.setting)),Object.keys(m).filter(o=>o!=="page").reverse().forEach(o=>{const{upper:n,title:i,breadcrumbs:s,icon:d}=m[o];u.includes(n)&&(r=r.map(y=>(y.index+=1,y.total+=1,y)),r.unshift({type:"setting_search_result",ancestorRendererData:K.SETTING_RENDERER_CONFIGS[n],setting:n,title:i,breadcrumbs:s,icon:d,index:0,total:r.length+1}))}),r))};const I=t=>(B(),q(t)),p=v(S.name),b=l("_currentDispatchActionType"),J=(...t)=>t.forEach(a=>l(a)[a]={...l(a)[a]}),Q={...S,onStart(){if(J("SETTING_RENDERER_CONFIGS","SETTING_RELATIONSHIPS"),M(p),$(p),H(),h.getCurrentUser())I(p);else{let t=function(){b.unsubscribe("CONNECTION_OPEN",t),I(p)};b.subscribe("CONNECTION_OPEN",t)}},onStop(){p.unpatchAll()}};R(Q);
